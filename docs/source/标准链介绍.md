# 标准链介绍

物联网（Internet of Things）是一个具有技术，社会和经济意义的新兴主题。物联网对互联网和经济的影响的预测令人瞩目，一些人预计到2025年将有多达1000亿个连接的智能设备，对全球经济的影响超过11万亿美元。未来，整个物联网所产生的数据和依附于物联网的资产的总量将难以估算。

但是目前物联网的发展仍然存在着巨大的挑战，可能阻碍其发挥全部潜力。我们经常看到有关黑客攻击物联网设备的头条新闻，监视问题以及对隐私的担忧也已经引起了公众的关注。幸运的是，区块链技术正是解决许多此类问题的方法。区块链网络创建了一种安全且永久的方法来记录由物联网设备处理的数据。这种相互连接的设备网络除了能够安全可靠地存储收集到的数据外，还可以与环境交互并做出决策，无需任何人工干预，而且不会泄漏这些数据。

通过区块链技术给物联网带来的信任和安全，可以解决目前物联网业务中几个痛点的问题：

- 可扩展性：当前的物联网是一种集中式架构，具有许多瓶颈，无法进行大规模扩展：成本飞涨，系统拥塞，可靠性降低和服务器漏洞。在基于区块链网络的信任下，物联网设备可以以对等方式相互通信和交互，大大降低了成本并提高了交易的速度，这使物联网网络具有无限扩展的可能。
- 安全性：物联网生态系统中的任何故障都可能暴露多个设备和大量高度个人化的数据。这些安全漏洞通常围绕三个领域：身份验证，连接和事务。通过使用区块链来管理物联网设备对数据的访问，任何攻击者都将无法绕过新的安全层。
- 数据即资产：物联网边缘设备所产生的数据通常被提交并保留到在中心服务器中，这些数据被寡头垄断并且无法衡量其价值。区块链技术可以让设备产生的数据可以在可信透明的环境中得到分享，通过市场体现数据的价值。

标准链是一条以物联网设备作为节点，为物联网生态而构建的可信高效的价值传输公链。接入标准链的智能设备不仅可以共享算力或存储，还可以共享它们的数据和信用。标准链项目的愿景是，通过区块链技术将全球所有的物联网设备都整合在一起，成为一台配置灵活，可以处理海量数据和大规模事务，满足多种商业需求的超级计算机。

## FLUID主网

基于这一愿景，标准链团队在以下三个方面推动当前公链技术的边界。

- 更高的吞吐量和无限的存储量。在物联网中，应该快速处理并安全地存储大量交易和数据，这是构建物联网基础架构的基本要求。
- 更广的覆盖范围。不受硬件或软件限制的任何类型的物联网设备都可以连接到区块链网络。例如，许多边缘设备仅具有极少量的计算能力和存储空间，但它们处理重要数据，因此，为了提高安全性，它们应成为区块链网络的一部分。
- 效率和公平性。任何类型的设备都可以连接到标准链，并共享整个生态系统的优势。区块链必须激励所有设备共享其资源和数据。激励机制必须经过精心设计，以便设备可以最有效的方式进行协作。

标准链团队在第一代主网的开发过程中进行和很多创新，并把第一代主网命名为FLUID：即 *Fast*、*Light*、*United*、*Intelligent* 和 *Decentralized* 这五个英文单词的首字母缩写。

## R-DAG结构

DAG（Directional Acyclic Graph）技术是一种被广泛用于物联网场景的区块链账本技术。具有高并发性、高吞吐量和低交易费等优点。标准链技术团队基于自身的设计需求对传统DAG技术进行深度优化和改进，通过对DAG中子区块在随机选择父区块时引入一定规则，使得整体的DAG网络可以获得更好的性能。我们称之为R-DAG（Regularized Directional Acyclic Graph)，即一种规则化的DAG技术。

<p align="center">
	<img src="https://github.com/canonchain/canonchain-document/blob/master/docs/source/R-DAG.png?raw=true" width="500"></img><br>
	图1：R-DAG结构示例
</p>

和传统的DAG结构一样，在标准链中每个区块拥有一个交易，区块中包含通过哈希对先前区块即父区块的引用。区块及其之间的连接分别是DAG的顶点和边缘。如图1所示，R-DAG技术将整个DAG结构分为两层，我们称之为共识层（Concensus Layer）和交易层（Transaction Layer）。

- 交易层中的区块仅引用同一账户之前的一个区块，每个账户都有自己单独的一条链，该链记录了账户所有的交易记录。一账户一链的设计可以让每个账户在不影响到全网共识的情况下高速的发送数据，从而实现全网的高性能。而且一账户一链使的标准链轻节点的设计变得异常简单，方便标准链节点在轻型物联网节点中的部署。
- 标准链的共识算法运行在共识层中。共识层的结构和传统意义上的DAG类似。所有标准链的节点首先通过对共识层中的区块次序形成共识，然后通过共识层区块对交易层区块的引用关系确定交易层区块的次序，这可以类比为比特币和以太坊里面矿工打包交易的过程。 共识层中的交易以在网络中达成共识的唯一目的，而实际交易发生在交易层中。

### 见证人（Witness）

共识层中的所有区块均由一定数量的非匿名并且信誉良好的人或公司创建。这些个人或者公司可能在标准链社区享有良好和长久的声誉，或者在保持标准链健康发展方面拥有巨大利益，我们称之为见证人。见证人节点应该具备一定的物理性能，并且能够频繁发布交易并保持诚实。见证人是标准链中账本的最终维护者。见证人通过代币质押和社区选举的方式产生，并可以在一定的时间之后进行更换。

### 主链（Main Chain）

标准链中的共识是通过所有块的总排序来实现的。每个节点首先在其本地DAG的共识层内找到稳定主链。然后，每个节点按照如下步骤对稳定主链上的区块以及它们所包括的其他所有区块进行编号。

1. 它首先为直接位于稳定主链上的块定义索引。创世区块的索引为0；主链上属于创世块的下一个块的索引为1；依此类推。通过沿稳定主链前进，依次为位于稳定主链上的区块分配索引。
2. 对于不在稳定主链上的任何区块，其索引等于最先引用该区块的稳定主链上区块的索引。
3. 最后每个节点都可以使用以下规则确定具有指定索引的任意两个块B1和B2的顺序：B1排序在B2之前当且仅当 a）B1的索引低于B2；或者 b）B1和B2具有相同的索引，但B1直接由B2引用；或者 c）B1和B2具有相同的索引且没有引用关系，但B1的哈希值低于B2。

作为图1所示共识的一个具体示例，一个节点试图确定以蓝色标记的两个块B1和B2的顺序。节点通过本地DAG找到的稳定主链用粗体箭头标记，每个块内的数字是根据稳定主链分配的索引。现在，区块B1具有索引3，区块B2具有索引4。因此，由于B1的索引比B2低，因此节点将确定B1排序在B2之前。

## 技术文章

如果您想详细了解标准链中的共识算法及对其安全性的证明，请参看我们的技术文章 <a href="https://github.com/canonchain/canonchain-document/blob/master/docs/source/Consensus%20Algorithm_v2.1.pdf">*Consensus and Security in Canonchain*</a>。